<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Manage hemibrain-FAFB neuron matches — flywire_matching_rewrite • hemibrainr</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Manage hemibrain-FAFB neuron matches — flywire_matching_rewrite" />
<meta property="og:description" content="We can match neurons in the hemibrain data with FAFB neurons (hemibrain-&amp;gt;FAFB, hemibrain tab) and
FAFB neurons have been matched with their hemibrain counterparts (FAFB-&amp;gt;hemibrain, fafb tab). These matches are recorded on a
Google
  Sheet on our hemibrain Google Team Drive, to which you will need access
through an authenticated account to view and use this function. We can use these function to manipulate the Google Sheet.
This include adding new IDs for matching (hemibrain_matching_add), transfer matches between the sheet's hemibrain and FAFB tabs (hemibrain_matching_transfers)
and add pre-made matches (hemibrain_add_matches).The function lywire_matching_rewrite updates a Google sheet with correct flywire IDs and stable
locations in flywire space, based on CATMAID skids." />
<meta property="og:image" content="/logo.svg" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hemibrainr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/flywire.html">flywire</a>
    </li>
    <li>
      <a href="../articles/glomerulus_search.html">glomerulus search</a>
    </li>
    <li>
      <a href="../articles/google_filestream.html">read data from Google drive</a>
    </li>
    <li>
      <a href="../articles/hemibrain_alpns_toons.html">olfactory connectivity</a>
    </li>
    <li>
      <a href="../articles/hemibrain_axons_dendrites.html">axons and dendrites</a>
    </li>
    <li>
      <a href="../articles/hemibrain_connectivity.html">hemibrain connectivity</a>
    </li>
    <li>
      <a href="../articles/match_making.html">neuron match making</a>
    </li>
    <li>
      <a href="../articles/meta_data.html">hemibrain and flywire meta data</a>
    </li>
    <li>
      <a href="../articles/packages_guide.html">related packages</a>
    </li>
    <li>
      <a href="../articles/transmitters.html">transmitters</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/flyconnectome/hemibrainr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Manage hemibrain-FAFB neuron matches</h1>
    <small class="dont-index">Source: <a href='https://github.com/flyconnectome/hemibrainr/blob/master/R/flywire_matching.R'><code>R/flywire_matching.R</code></a>, <a href='https://github.com/flyconnectome/hemibrainr/blob/master/R/hemibrain_matching.R'><code>R/hemibrain_matching.R</code></a></small>
    <div class="hidden name"><code>hemibrain_add_made_matches.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>We can match neurons in the hemibrain data with FAFB neurons (hemibrain-&gt;FAFB, hemibrain tab) and
FAFB neurons have been matched with their hemibrain counterparts (FAFB-&gt;hemibrain, fafb tab). These matches are recorded on a
<a href='https://docs.google.com/spreadsheets/d/1OSlDtnR3B1LiB5cwI5x5Ql6LkZd8JOS5bBr-HTi0pOw/edit#gid=0'>Google
  Sheet</a> on our hemibrain Google Team Drive, to which you will need access
through an authenticated account to view and use this function. We can use these function to manipulate the Google Sheet.
This include adding new IDs for matching (<code>hemibrain_matching_add</code>), transfer matches between the sheet's hemibrain and FAFB tabs (<code>hemibrain_matching_transfers</code>)
and add pre-made matches (<code>hemibrain_add_matches</code>).The function <code>lywire_matching_rewrite</code> updates a Google sheet with correct flywire IDs and stable
locations in flywire space, based on CATMAID skids.</p>
    </div>

    <pre class="usage"><span class='fu'>flywire_matching_rewrite</span><span class='op'>(</span>
  flywire_ids <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='fu'><a href='flywire_neurons.html'>flywire_neurons</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>,
  meta <span class='op'>=</span> <span class='fu'><a href='flywire_neurons.html'>flywire_neurons</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>[</span>, <span class='op'>]</span>,
  catmaid.update <span class='op'>=</span> <span class='cn'>TRUE</span>,
  selected_file <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/options.html'>options</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>$</span><span class='va'>hemibrainr_matching_gsheet</span>,
  reorder <span class='op'>=</span> <span class='cn'>FALSE</span>,
  top.nblast <span class='op'>=</span> <span class='cn'>FALSE</span>,
  nblast <span class='op'>=</span> <span class='cn'>NULL</span>,
  <span class='va'>...</span>
<span class='op'>)</span>

<span class='fu'>hemibrain_add_made_matches</span><span class='op'>(</span>
  <span class='va'>df</span>,
  direction <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"both"</span>, <span class='st'>"hemibrain-FAFB"</span>, <span class='st'>"FAFB-hemibrain"</span>, <span class='st'>"hemisphere"</span><span class='op'>)</span>,
  User <span class='op'>=</span> <span class='st'>"flyconnectome"</span>,
  selected_file <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/options.html'>options</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>$</span><span class='va'>hemibrainr_matching_gsheet</span>,
  <span class='va'>...</span>
<span class='op'>)</span>

<span class='fu'>hemibrain_matching_add</span><span class='op'>(</span>
  ids <span class='op'>=</span> <span class='cn'>NULL</span>,
  meta <span class='op'>=</span> <span class='cn'>NULL</span>,
  dataset <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"hemibrain"</span>, <span class='st'>"FAFB"</span>, <span class='st'>"CATMAID"</span>, <span class='st'>"flywire"</span>, <span class='st'>"lm"</span><span class='op'>)</span>,
  User <span class='op'>=</span> <span class='va'>dataset</span>,
  selected_file <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/options.html'>options</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>$</span><span class='va'>hemibrainr_matching_gsheet</span>,
  <span class='va'>...</span>
<span class='op'>)</span>

<span class='fu'>hemibrain_matching_transfers</span><span class='op'>(</span>
  selected_file <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/options.html'>options</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>$</span><span class='va'>hemibrainr_matching_gsheet</span>
<span class='op'>)</span>

<span class='fu'>fafb_matching_rewrite</span><span class='op'>(</span>
  selected_file <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/options.html'>options</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>$</span><span class='va'>hemibrainr_matching_gsheet</span>,
  top.nblast <span class='op'>=</span> <span class='cn'>FALSE</span>,
  reorder <span class='op'>=</span> <span class='cn'>FALSE</span>,
  nblast <span class='op'>=</span> <span class='cn'>NULL</span>,
  <span class='va'>...</span>
<span class='op'>)</span>

<span class='fu'>hemibrain_matching_rewrite</span><span class='op'>(</span>
  ids <span class='op'>=</span> <span class='cn'>NULL</span>,
  selected_file <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/options.html'>options</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>$</span><span class='va'>hemibrainr_matching_gsheet</span>,
  top.nblast <span class='op'>=</span> <span class='cn'>FALSE</span>,
  meta <span class='op'>=</span> <span class='cn'>NULL</span>,
  nblast.hemibrain.catmaid <span class='op'>=</span> <span class='cn'>NULL</span>,
  nblast.hemibrain.flywire <span class='op'>=</span> <span class='cn'>NULL</span>,
  <span class='va'>...</span>
<span class='op'>)</span>

<span class='fu'>flycircuit_matching_rewrite</span><span class='op'>(</span>
  flycircuit.ids <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='fu'><a href='flycircuit_neurons.html'>flycircuit_neurons</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>,
  meta <span class='op'>=</span> <span class='va'>flycircuit_neurons</span><span class='op'>[</span>, <span class='op'>]</span>,
  selected_file <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/options.html'>options</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>$</span><span class='va'>hemibrainr_matching_gsheet</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>flywire_ids</th>
      <td><p>flywire IDs to add to Google sheet if not already present.</p></td>
    </tr>
    <tr>
      <th>meta</th>
      <td><p>meta data for the given flycircuit IDs.</p></td>
    </tr>
    <tr>
      <th>catmaid.update</th>
      <td><p>logical. Whether or not to update <code>flywire_xyz</code> and <code>root_id</code> columns, based on e CATMAID neuron specified by a <code>skid</code> column.</p></td>
    </tr>
    <tr>
      <th>selected_file</th>
      <td><p>Specifies which Google Sheet to use. Unless you are using a personal Google Sheet, this should be <code>options()$hemibrainr_matching_gsheet</code>.</p></td>
    </tr>
    <tr>
      <th>reorder</th>
      <td><p>logical. Whether or not to re-write the sheet so that it is ordered by hemilineage.</p></td>
    </tr>
    <tr>
      <th>top.nblast</th>
      <td><p>logical. Whether or not to also give the top NBLAST match for each entry.</p></td>
    </tr>
    <tr>
      <th>nblast</th>
      <td><p>if <code>top.nblast</code> is <code>TRUE</code> this nblast matrix is used to update the column <code>top.nblast</code>. If set to <code>NULL</code> defaults to using <code>hemibrain_nblast</code>. Columns should be hemibrain neurons, and rows the other data set.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>arguments passed to methods for, for example, <code><a href='https://natverse.org/neuprintr/reference/neuprint_get_meta.html'>neuprintr::neuprint_get_meta</a></code> and <code><a href='https://rdrr.io/pkg/elmr/man/read.neurons.fafb.html'>elmr::fafb_get_meta</a></code>.</p></td>
    </tr>
    <tr>
      <th>df</th>
      <td><p>a <code>data.frame</code> of pre-made matches that the user wants to transfer onto the Google Sheet. This will erase any extant matches for the specified neurons. This data frame
must have columns: bodyid (i.e. the hemibrain neuron), skid (i.e. the FAFB neuron) and quality (i.e. match quality). Matches have three levels of 'quality', largely dependent on the degree of manual tracing for FAFB neurons
 - good (could be the same cell), medium (same cell_type) and poor (could be the same or similar cell_type).</p></td>
    </tr>
    <tr>
      <th>direction</th>
      <td><p>the match direction, i.e. hemibrain-&gt;FAFB (hemibrain tab) or FAFB-&gt;hemibrain (fafb tab). Defaults to updating both.</p></td>
    </tr>
    <tr>
      <th>User</th>
      <td><p>your initials, so updates can be linked to you. There is a limited number of users, each of whom have been
assigned a number of neurons to match up. In order to add yourself as a user,
simply open this Google Sheet in your browser and add your initials to neurons of your choosing on the rightmost column 'Users'.</p></td>
    </tr>
    <tr>
      <th>ids</th>
      <td><p>either hemibrain bodyids or FAFB skids to add to a Google Sheet. You will want to add IDs where they do not already exist, so that
you can use, for example, <code><a href='LR_matching.html'>hemibrain_matching</a></code>.</p></td>
    </tr>
    <tr>
      <th>dataset</th>
      <td><p>the tab to which to add your new information. You are either adding to information related to hemibrain neurons, or FAFB neurons.</p></td>
    </tr>
    <tr>
      <th>nblast.hemibrain.catmaid</th>
      <td><p>if <code>top.nblast</code> is <code>TRUE</code> this nblast matrix is used to update the column <code>top.nblast</code>. If set to <code>NULL</code> defaults to using <code>hemibrain_nblast</code>. Columns should be hemibrain neurons, and rows CATMAID neurons.</p></td>
    </tr>
    <tr>
      <th>nblast.hemibrain.flywire</th>
      <td><p>if <code>top.nblast</code> is <code>TRUE</code> this nblast matrix is used to update the column <code>top.nblast</code>. If set to <code>NULL</code> defaults to using <code>hemibrain_nblast</code>. Columns should be hemibrain neurons, and rows flywire neurons.</p></td>
    </tr>
    <tr>
      <th>flycircuit.ids</th>
      <td><p>flycircuit IDs to add to Google sheet if not already present.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>NULL</code>. Updates the master Google sheet.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Currently, information is recorded in a
  <a href='https://docs.google.com/spreadsheets/d/1OSlDtnR3B1LiB5cwI5x5Ql6LkZd8JOS5bBr-HTi0pOw/edit#gid=0'>Google
   Sheet</a></p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='LR_matching.html'>hemibrain_matching</a></code>, <code><a href='LR_matching.html'>fafb_matching</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># \donttest{</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>

<span class='co'># Add a mising FAFB projection neuron, so we can match it later:</span>
<span class='fu'>hemibrain_matching_add</span><span class='op'>(</span>ids <span class='op'>=</span> <span class='st'>"16"</span>, dataset <span class='op'>=</span> <span class='st'>"FAFB"</span>, User <span class='op'>=</span> <span class='st'>"ASB"</span><span class='op'>)</span>


<span class='op'>}</span><span class='co'># }</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Alexander Bates, Gregory Jefferis.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


