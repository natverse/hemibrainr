<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Download a large set of well-traced skeletonised neurons from FlyWire — flywire_neurons • hemibrainr</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Download a large set of well-traced skeletonised neurons from FlyWire — flywire_neurons" />
<meta property="og:description" content="Get a large number of skeletonised neurons from FlyWire. The neuronlist is saved as a
 nat::neuronlistfh object so certain neurons may be read from it
 without loading the entire, large neuronlist into memory. You will need access to the hemibrain Google Team Drive and
 have it mounted with Google filestream.
 If you want to flag flywire neurons that should be added to the Google drive, without doing this yourself, you can use
 flywire_request. The flywire_basics function will calculate some useful meta-data, namely
a point in the primary neurite tract that can be used as a stable reference for this neuron." />
<meta property="og:image" content="/logo.svg" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hemibrainr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/data.html">hemibrain and flywire meta data</a>
    </li>
    <li>
      <a href="../articles/flywire.html">flywire</a>
    </li>
    <li>
      <a href="../articles/google_filestream.html">read data from Google drive</a>
    </li>
    <li>
      <a href="../articles/hemibrain_alpns_toons.html">olfactory connectivity</a>
    </li>
    <li>
      <a href="../articles/hemibrain_axons_dendrites.html">axons and dendrites</a>
    </li>
    <li>
      <a href="../articles/hemibrain_connectivity.html">hemibrain connectivity</a>
    </li>
    <li>
      <a href="../articles/match_making.html">neuron match making</a>
    </li>
    <li>
      <a href="../articles/packages_guide.html">related packages</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/flyconnectome/hemibrainr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Download a large set of well-traced skeletonised neurons from FlyWire</h1>
    <small class="dont-index">Source: <a href='https://github.com/flyconnectome/hemibrainr/blob/master/R/flywire_googledrive.R'><code>R/flywire_googledrive.R</code></a></small>
    <div class="hidden name"><code>flywire_neurons.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Get a large number of skeletonised neurons from FlyWire. The neuronlist is saved as a
 <code><a href='https://rdrr.io/pkg/nat/man/neuronlistfh.html'>nat::neuronlistfh</a></code> object so certain neurons may be read from it
 without loading the entire, large <code>neuronlist</code> into memory. You will need access to the hemibrain Google Team Drive and
 have it mounted with Google filestream.
 If you want to flag flywire neurons that should be added to the Google drive, without doing this yourself, you can use
 <code>flywire_request</code>. The <code>flywire_basics</code> function will calculate some useful meta-data, namely
a point in the primary neurite tract that can be used as a stable reference for this neuron.</p>
    </div>

    <pre class="usage"><span class='fu'>flywire_neurons</span><span class='op'>(</span>
  x <span class='op'>=</span> <span class='cn'>NULL</span>,
  WithConnectors <span class='op'>=</span> <span class='cn'>FALSE</span>,
  local <span class='op'>=</span> <span class='cn'>FALSE</span>,
  brain <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"FlyWire"</span>, <span class='st'>"JRCFIB2018Fraw"</span>, <span class='st'>"JRCFIB2018F"</span>, <span class='st'>"FAFB"</span>, <span class='st'>"FAFB14"</span>, <span class='st'>"JFRC2"</span>,
    <span class='st'>"JFRC2013"</span>, <span class='st'>"JRC2018F"</span>, <span class='st'>"FCWB"</span><span class='op'>)</span>,
  mirror <span class='op'>=</span> <span class='cn'>FALSE</span>,
  type <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"neurons"</span>, <span class='st'>"swc"</span>, <span class='st'>"dotprops"</span>, <span class='st'>"cut_dotprops"</span><span class='op'>)</span>,
  zip <span class='op'>=</span> <span class='cn'>TRUE</span>,
  <span class='va'>...</span>
<span class='op'>)</span>

<span class='fu'>flywire_basics</span><span class='op'>(</span><span class='va'>flywire.neurons</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='fu'>flywire_request</span><span class='op'>(</span>
  <span class='va'>request</span>,
  gsheet <span class='op'>=</span> <span class='cn'>FALSE</span>,
  selected_sheet <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/options.html'>options</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>$</span><span class='va'>flywire_flagged_gsheet</span>,
  sheet <span class='op'>=</span> <span class='st'>"flywire"</span>,
  User <span class='op'>=</span> <span class='st'>"hemibrainr"</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>flywire IDs for desired. If left as <code>NULL</code>, all flywire neurons that can be summoned from the hemibrainr Google drive are summoned.</p></td>
    </tr>
    <tr>
      <th>WithConnectors</th>
      <td><p>logical, if <code>TRUE</code> the neuron fetched have predicted synapses located within each neuron at <code>neuron$connectors</code> and
have a predicted axon/dendrite split at <code>neuron$d$Label</code> for each point in its skeleton, created using <code><a href='flow_centrality.html'>flow_centrality</a></code>.</p></td>
    </tr>
    <tr>
      <th>local</th>
      <td><p><code>FALSE</code> or path. By default (<code>FALSE</code>) data is read from <code>options()$Drive_hemibrain_data</code>), but the user can specify an alternative path.</p></td>
    </tr>
    <tr>
      <th>brain</th>
      <td><p>the brainspace in which hemibrain neurons have been registered. Defaults to raw voxel space for the FlyWire project.</p></td>
    </tr>
    <tr>
      <th>mirror</th>
      <td><p>logical, whether or not to read neurons that have been mirrored (i.e. flipped to the 'other' brain hemisphere).</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>When using neurons with <code>flywire_neurons</code> from the Google drive a neuronlistfh object of neuron skeletons (default),
the saved <code>.swc</code> files, a <code><a href='https://rdrr.io/pkg/nat/man/dotprops.html'>nat::dotprops</a></code> objects or a <code>nat::dotprops object</code> cut to the hemibrain volume. Not all brainspaces supported.</p></td>
    </tr>
    <tr>
      <th>zip</th>
      <td><p>logical. If <code>TRUE</code> then <code><a href='https://rdrr.io/pkg/nat/man/neuronlistz.html'>nat::neuronlistz</a></code> is used to resad neurons from a <code>.zip</code> archive. Otherwise, <code><a href='https://rdrr.io/pkg/nat/man/neuronlistfh.html'>nat::neuronlistfh</a></code> is used to read neurons from a <code>.rds</code> file with a linked 'data' folder.
The <code>.zip</code> method is preffered. Both methods load a dynamic neuronlist, which only loads skeleton data into memroy at the point where it is processed.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additional arguments passed to <code><a href='https://rdrr.io/pkg/nat/man/nlapply.html'>nat::nlapply</a></code>.and/or <code><a href='https://rdrr.io/pkg/fafbseg/man/skeletor.html'>fafbseg::skeletor</a></code>.</p></td>
    </tr>
    <tr>
      <th>flywire.neurons</th>
      <td><p>a <code>neuronlist</code> of flywire neurons in FlyWire space. The <code>flywire_basics</code> function will calculate some useful meta-data, namely
a point in the primary neurite tract that can be used as a stable reference for this neuron.</p></td>
    </tr>
    <tr>
      <th>request</th>
      <td><p>a neuronlist, matrix of x,y,z position or flywire ID to add to a
<a href='https://docs.google.com/spreadsheets/d/1rzG1MuZYacM-vbW7100aK8HeA-BY6dWAVXQ7TB6E2cQ/edit#gid=0'>Google sheet</a> that records flywire positions
flagged to be processed into neuron skeletons that can be called by <code>flywire_neurons</code>.</p></td>
    </tr>
    <tr>
      <th>gsheet</th>
      <td><p>logical, whether or not the request is are googlesheet keys. If they are, every item in their <code>flywire.xyz</code> columns is added to
the sheet specified by <code>selected_sheet</code>.</p></td>
    </tr>
    <tr>
      <th>selected_sheet</th>
      <td><p>the Google sheet onto which to add new flywire coordinate. I.e. <a href='https://docs.google.com/spreadsheets/d/1rzG1MuZYacM-vbW7100aK8HeA-BY6dWAVXQ7TB6E2cQ/edit#gid=0'>Google sheet</a>.</p></td>
    </tr>
    <tr>
      <th>sheet</th>
      <td><p>the tab onto which to add your requests.</p></td>
    </tr>
    <tr>
      <th>User</th>
      <td><p>character, the user who is added new data.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code>neuronlist</code> object containing flywire skeletons. In the meta-data, it might be useful for some users to note that
you will get:</p>
<ul>
<li><p>"flywire.id" The ID given to the corresponding volumetric body in flywire.
 These are used to do things like fetch volumes and are the input to the <code>skeletor</code> function. However, they are highly volatile and
 change a lot with active tracing.</p></li>
<li><p>"flywire.xyz" The voxel coordinate of a single point in this neuron, usually a cell body fiber tract position. This is a more accurate way
 of keeping tract of neuron as it will always correspond to the same 'neuron' even though its related flywire.id will change with merge/split events in flywire.</p></li>
<li><p>"hemilineage" An estimated hemilineage identity from both of two naming systems, Ito et al. 2013 and Wong et al. 2013</p></li>
<li><p>"side" An estimate as to the 'side', i.e. brain hemisphere, in which the neuron lies</p></li>
<li><p>"skid" The 'skeleton ID' of this neuron's match in CATMAID for FAFBv14</p></li>
<li><p>"FAFB.xyz" The coordinates in nanometres of a point in the neuron, in FAFBv14 space</p></li>
<li><p>"hemibrain_match" The bodyid of an estimated hemibrain match</p></li>
</ul>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='hemibrain_read_neurons.html'>hemibrain_read_neurons</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># \donttest{</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='co'># Loads all processed flywire neurons as a neuronlistfh object</span>
<span class='va'>fw.neurons</span> <span class='op'>=</span> <span class='fu'>flywire_neurons</span><span class='op'>(</span><span class='op'>)</span>

<span class='co'># Get them already bridged to the JRC2018F brainsapce</span>
<span class='co'>## (Bogovic et al. 2018, high performance brain space)</span>
<span class='va'>fw.neurons.jrc2018f</span> <span class='op'>=</span> <span class='fu'>flywire_neurons</span><span class='op'>(</span>brain <span class='op'>=</span> <span class='st'>"JRC2018F"</span><span class='op'>)</span>

<span class='co'># Get them already mirrored to the other hemispehre, i.e. flipped</span>
<span class='va'>fw.neurons.jrc2018f.m</span> <span class='op'>=</span> <span class='fu'>flywire_neurons</span><span class='op'>(</span>brain <span class='op'>=</span> <span class='st'>"JRC2018F"</span>, mirror <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='co'># Now say you have some flywire ID~s you wants to add</span>
<span class='co'>## to the nightly processing so they are available from Google drive.</span>
<span class='co'>## And they are stored in a .csv:</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://readr.tidyverse.org'>readr</a></span><span class='op'>)</span>
<span class='va'>csv</span> <span class='op'>=</span> <span class='fu'><a href='https://readr.tidyverse.org/reference/read_delim.html'>read_csv</a></span><span class='op'>(</span><span class='st'>"/Users/abates/Downloads/FlyWire_list.txt"</span>,
col_type <span class='op'>=</span> <span class='fu'><a href='https://readr.tidyverse.org/reference/cols.html'>cols</a></span><span class='op'>(</span>.default <span class='op'>=</span> <span class='st'>"c"</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>ids</span> <span class='op'>=</span> <span class='va'>csv</span><span class='op'>[</span>,<span class='fl'>1</span><span class='op'>]</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span>
<span class='va'>neurons</span> <span class='op'>=</span> <span class='fu'>skeletor</span><span class='op'>(</span><span class='va'>ids</span><span class='op'>)</span>
<span class='va'>neurons.with.info</span> <span class='op'>=</span> <span class='fu'>hemibrainr</span><span class='fu'>:::</span><span class='fu'>flywire_basics</span><span class='op'>(</span><span class='va'>neurons</span><span class='op'>)</span>
<span class='va'>new.points</span> <span class='op'>=</span> <span class='fu'>nat</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/nat/man/xyzmatrix.html'>xyzmatrix</a></span><span class='op'>(</span><span class='va'>neurons.with.info</span><span class='op'>[</span>,<span class='st'>"flywire.xyz"</span><span class='op'>]</span><span class='op'>)</span>
<span class='fu'>flywire_request</span><span class='op'>(</span><span class='va'>new.points</span><span class='op'>)</span>
<span class='co'>## Now they are added to a google sheet, and will be read and</span>
<span class='co'>##  processed as part of this nightly pipeline:</span>
<span class='co'>### https://github.com/flyconnectome/fafbpipeline</span>

<span class='co'># Now get some split neurons with synapses</span>
<span class='va'>fw.split</span> <span class='op'>=</span> <span class='fu'>flywire_neurons</span><span class='op'>(</span>WithConnectors<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
<span class='fu'>nopen3d</span><span class='op'>(</span><span class='op'>)</span>
<span class='fu'><a href='plot3d_split.html'>nlscan_split</a></span><span class='op'>(</span><span class='va'>fw.split</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>fw.split</span><span class='op'>)</span>,<span class='fl'>15</span><span class='op'>)</span><span class='op'>]</span><span class='op'>)</span>

<span class='co'># Get neuron dotprops object in hemibrain brainspace,</span>
<span class='co'>## ready for NBLAST with hemibrain neurons</span>
<span class='va'>fw.dps.cut</span> <span class='op'>=</span> <span class='fu'>flywire_neurons</span><span class='op'>(</span>type<span class='op'>=</span><span class='st'>"cut_dotprops"</span>, brain <span class='op'>=</span> <span class='st'>"JRCFIB2018F"</span><span class='op'>)</span>

<span class='op'>}</span><span class='co'># }</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Alexander Bates, Gregory Jefferis.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


